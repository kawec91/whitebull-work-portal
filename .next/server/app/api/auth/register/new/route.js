"use strict";(()=>{var e={};e.id=167,e.ids=[167],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},73675:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>c,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var a={};t.r(a),t.d(a,{POST:()=>u});var s=t(67092),i=t(25932),o=t(94147),n=t(23187);let u=async e=>{try{let r=await e.formData(),t=r.get("firstName"),a=r.get("lastName"),s=r.get("email"),i=r.get("password"),o=r.get("profileImageUrl");return await n.db.user.findUnique({where:{email:s}})||(console.log("user not exist-------"),await n.db.user.create({data:{firstName:t,lastName:a,email:s,emailVerified:!1,password:i,role:"user",profileImageUrl:o}})),Response.redirect(`${process.env.NEXTAUTH_URL}/`)}catch(e){return console.log(e),new Response(JSON.stringify({message:"error"}),{status:500})}},p=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/new/route",pathname:"/api/auth/register/new",filename:"route",bundlePath:"app/api/auth/register/new/route"},resolvedPagePath:"C:\\Users\\lukasz\\Desktop\\Work\\cms\\cmsv0.0.1\\app\\api\\auth\\register\\new\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m}=p,c="/api/auth/register/new/route";function g(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},23187:(e,r,t)=>{t.d(r,{db:()=>a});let a=new(t(53524)).PrismaClient},67092:(e,r,t)=>{e.exports=t(30517)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[424],()=>t(73675));module.exports=a})();